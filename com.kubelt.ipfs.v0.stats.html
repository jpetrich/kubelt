<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" content="text/html" http-equiv="Content-Type" />
		<meta content="" name="description" />
		<title>Kubelt SDK Reference</title>
 		<link rel="stylesheet" type="text/css" href="css/shCore.css" />
		<style type="text/css">.syntaxhighlighter{overflow:hidden !important;}</style>
		<link rel="stylesheet" type="text/css" href="css/shThemeMarginalia.css" />
		<link rel="stylesheet" type="text/css" href="css/marginalia.css" />
		<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
		<script type="text/javascript" src="js/xregexp-min.js"></script>
		<script type="text/javascript" src="js/shCore.js"></script>
		<script type="text/javascript" src="js/shBrushClojure.js"></script>
	</head>
	<body>
		<table>
			<tr>
				<td class="docs">
					<div class="docs-header">
						<a class="anchor" href="#repl" name="repl">
							<h1 class="project-name">com.kubelt.ipfs.v0.stats</h1>
							<a class="toc-link" href="index.html">toc</a>
						</a>
					</div>
				</td>
				<td class="codes" />
			</tr>
			<tr>
				<td class="docs">
					<p>Obtain statistics from an IPFS daemon.</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure">(ns com.kubelt.ipfs.v0.stats
  {:copyright &quot;©2022 Kubelt, Inc.&quot; :license &quot;Apache 2.0&quot;}
  (:refer-clojure :exclude [format])
  (:require
   [com.kubelt.ipfs.spec :as ipfs.spec]
   [com.kubelt.ipfs.util :as ipfs.util]
   [com.kubelt.ipfs.v0 :as ipfs.v0]))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<h2>/api/v0/stats/bitswap</h2>On success returns 200 status and the following body.<p>{   "BlocksReceived": "<uint64>",   "BlocksSent": "<uint64>",   "DataReceived": "<uint64>",   "DataSent": "<uint64>",   "DupBlksReceived": "<uint64>",   "DupDataReceived": "<uint64>",   "MessagesReceived": "<uint64>",   "Peers": [     "<string>"   ],   "ProvideBufLen": "<int>",   "Wantlist": [     {       "/": "<cid-string>"     }   ] }</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure"></pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(def bitswap-desc
  {:com.kubelt/type :kubelt.type/api-resource
   :resource/description &quot;Show some diagnostic information on the bitswap agent.&quot;
   :resource/methods [:post]
   :resource/path &quot;/stats/bitswap&quot;
   :resource/params
   {:stats/verbose?
    {:name &quot;verbose&quot;
     :description &quot;Return extra information.&quot;
     :required false
     :spec :boolean}
    :stats/human?
    {:name &quot;human&quot;
     :description &quot;Print sizes in human-readable format (e.g. 1K, 234M, 2G).&quot;
     :required false
     :spec :boolean}}
   :response/types [&quot;application/json&quot;]
   :response/spec
   [:map
    [&quot;BlocksReceived&quot; :string]
    [&quot;BlocksSent&quot; :string]
    [&quot;DataReceived&quot; :string]
    [&quot;DataSent&quot; :string]
    [&quot;DupBlksReceived&quot; :string]
    [&quot;DupDataReceived&quot; :string]
    [&quot;MessagesReceiveed&quot; :string]
    [&quot;Peers&quot; [:vector :string]]
    [&quot;ProvideBufLen&quot; :string]
    [&quot;Wantlist&quot; [:vector [:map [&quot;/&quot; :string]]]]]})</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(def bitswap
  (ipfs.util/make-http ipfs.v0/api-base bitswap-desc))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<h2>/api/v0/stats/bw</h2>On success returns 200 status and the following body.<p>{   "RateIn": "<float64>",   "RateOut": "<float64>",   "TotalIn": "<int64>",   "TotalOut": "<int64>" }</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure"></pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(def bw-desc
  {:com.kubelt/type :kubelt.type/api-resource
   :resource/description &quot;Return IPFS bandwidth information.&quot;
   :resource/methods [:post]
   :resource/path &quot;/stats/bw&quot;
   :resource/params
   {:peer/id
    {:name &quot;peer&quot;
     :description &quot;Specify a peer to return bandwidth for.&quot;
     :required false
     :spec :string}
    :stats/proto
    {:name &quot;proto&quot;
     :description &quot;Specify a protocol to return bandwidth for.&quot;
     :required false
     :spec :string}
    :stats/poll?
    {:name &quot;poll&quot;
     :description &quot;Print bandwidth at an interval.&quot;
     :required false
     :spec :boolean}
    :stats/interval
    {:name &quot;interval&quot;
     :description &quot;Time interval to wait between updating output, if :stats/poll? is true. Accepts durations such as '300s', '1.5h', or '2h45m'. Valid time units are 'ns', 'us' (or 'µs'), 'ms', 's', 'm', 'h'. Default: 1s.&quot;
     :required false
     :spec :string}}
   :response/types [&quot;application/json&quot;]
   :response/spec
   [:map
    [&quot;RateIn&quot; :string]
    [&quot;RateOut&quot; :string]
    [&quot;TotalIn&quot; :string]
    [&quot;TotalOut&quot; :string]]})</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(def bw
  (ipfs.util/make-http ipfs.v0/api-base bw-desc))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<h2>/api/v0/stats/dht</h2>On success returns 200 status and the following body.<p>{   "Buckets": [     {       "LastRefresh": "<string>",       "Peers": [         {           "AgentVersion": "<string>",           "Connected": "<bool>",           "ID": "<string>",           "LastQueriedAt": "<string>",           "LastUsefulAt": "<string>"         }       ]     }   ],   "Name": "<string>" }</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure"></pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(def dht-desc
  {:com.kubelt/type :kubelt.type/api-resource
   :resource/description &quot;Return statistics about the node's DHT(s).&quot;
   :resource/methods [:post]
   :resource/path &quot;/stats/dht&quot;
   :resource/params
   {:table/name
    {:name &quot;arg&quot;
     :description &quot;The DHT whose table should be listed (wanserver, lanserver, wan, lan). 'wan' and 'lan' refer to client routing tables. When using the experimental DHT client only WAN is supported. Default: 'wan', 'lan'.&quot;
     :required false
     :spec ipfs.spec/dht}}
   :response/types [&quot;application/json&quot;]
   :response/spec
   [:map
    [&quot;Buckets&quot; [:vector
                [:map
                 [&quot;LastRefresh&quot; :string]
                 [&quot;Peers&quot; [:vector
                           [:map
                            [&quot;AgentVersion&quot; :string]
                            [&quot;Connected&quot; :string]
                            [&quot;ID&quot; :string]
                            [&quot;LastQueriedAt&quot; :string]
                            [&quot;LastUsefulAt&quot; :string]]]]] ]]
    [&quot;Name&quot; :string]]})</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(def dht
  (ipfs.util/make-http ipfs.v0/api-base dht-desc))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<h2>/api/v0/stats/provide</h2>On success returns 200 status and the following body.<p>{   "AvgProvideDuration": "<duration-ns>",   "LastReprovideBatchSize": "<int>",   "LastReprovideDuration": "<duration-ns>",   "TotalProvides": "<int>" }</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure"></pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(def provide-desc
  {:com.kubelt/type :kubelt.type/api-resource
   :resource/description &quot;Return statistics about the node's (re)provider system.&quot;
   :resource/methods [:post]
   :resource/path &quot;/stats/provide&quot;
   :resource/params
   {}
   :response/types [&quot;application/json&quot;]
   :response/spec
   [:map
    [&quot;AvgProvideDuration&quot; :string]
    [&quot;LastReprovideBatchSize&quot; :string]
    [&quot;LastReprovideDuration&quot; :string]
    [&quot;TotalProvides&quot; :string]]})</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(def provide
  (ipfs.util/make-http ipfs.v0/api-base provide-desc))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<h2>/api/v0/stats/repo</h2>On success returns 200 status and the following body.<p>{   "NumObjects": "<uint64>",   "RepoPath": "<string>",   "SizeStat": {     "RepoSize": "<uint64>",     "StorageMax": "<uint64>"   },   "Version": "<string>" }</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure"></pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(def repo-desc
  {:com.kubelt/type :kubelt.type/api-resource
   :resource/description &quot;Return statistics for the currently used repo.&quot;
   :resource/methods [:post]
   :resource/path &quot;/stats/repo&quot;
   :resource/params
   {:stats/size-only?
    {:name &quot;size-only&quot;
     :description &quot;Only report RepoSize and StorageMax.&quot;
     :required false
     :spec :boolean}
    :stats/human?
    {:name &quot;human&quot;
     :description &quot;Print sizes in human-readable format (e.g. 1K, 234M, 2G).&quot;
     :required false
     :spec :boolean}}
   :response/types [&quot;application/json&quot;]
   :response/spec
   [:map
    [&quot;NumObjects&quot; :string]
    [&quot;RepoPath&quot; :string]
    [&quot;SizeStat&quot; [:map
                 [&quot;RepoSize&quot; :string]
                 [&quot;StorageMax&quot; :string]]]
    [&quot;Version&quot; :string]]})</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(def repo
  (ipfs.util/make-http ipfs.v0/api-base repo-desc))</pre>
				</td>
			</tr>
			<tr>
				<td class="spacer docs">&nbsp;</td>
				<td class="codes" />
			</tr>
		</table>
		<div class="footer">Generated by <a href="https://github.com/captain-porcelain/sidenotes">Sidenotes</a>.&nbsp;&nbsp;Syntax highlighting provided by Alex Gorbatchev's <a href="http://alexgorbatchev.com/SyntaxHighlighter/">SyntaxHighlighter</a>
		</div>
		<script type="text/javascript" src="js/app.js"></script>
	</body>
</html>
