<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" content="text/html" http-equiv="Content-Type" />
		<meta content="" name="description" />
		<title>Kubelt SDK Reference</title>
 		<link rel="stylesheet" type="text/css" href="css/shCore.css" />
		<style type="text/css">.syntaxhighlighter{overflow:hidden !important;}</style>
		<link rel="stylesheet" type="text/css" href="css/shThemeMarginalia.css" />
		<link rel="stylesheet" type="text/css" href="css/marginalia.css" />
		<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
		<script type="text/javascript" src="js/xregexp-min.js"></script>
		<script type="text/javascript" src="js/shCore.js"></script>
		<script type="text/javascript" src="js/shBrushClojure.js"></script>
	</head>
	<body>
		<table>
			<tr>
				<td class="docs">
					<div class="docs-header">
						<a class="anchor" href="#repl" name="repl">
							<h1 class="project-name">dapp.routes</h1>
							<a class="toc-link" href="index.html">toc</a>
						</a>
					</div>
				</td>
				<td class="codes" />
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(ns dapp.routes
  (:require
   [re-frame.core :as re-frame]
   [reitit.frontend :as rf]
   [reitit.coercion.spec :as rss]
   [reitit.frontend.easy :as rfe]
   [reitit.frontend.controllers :as rfc]
   [dapp.pages.apps :as apps]
   [dapp.pages.dashboard :as dashboard]
   [dapp.pages.reports :as reports]
   [taoensso.timbre :as log])
   (:require
   [&quot;@heroicons/react/outline&quot; :refer (HomeIcon)]))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<p>Events ;;;</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure"></pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(re-frame/reg-event-fx ::push-state
  (fn [_ [_ &amp; route]]
    {:push-state route}))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(re-frame/reg-event-db ::navigated
  (fn [db [_ new-match]]
    (let [old-match   (:current-route db)
          controllers (rfc/apply-controllers (:controllers old-match) new-match)]
      (assoc db :current-route (assoc new-match :controllers controllers)))))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<p>Effects ;;;</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure"></pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<p>Triggering navigation from events.</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure"></pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(re-frame/reg-fx :push-state
  (fn [route]
    (apply rfe/push-state route)))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<p>Subscriptions ;;;</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure"></pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(re-frame/reg-sub ::current-route
  (fn [db]
    (:current-route db)))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<p>Routes ;;;</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure"></pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<p>Return relative url for given route. Url can be used in HTML links.</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure">(defn href
  ([k]
   (href k nil nil))
  ([k params]
   (href k params nil))
  ([k params query]
   (rfe/href k params query)))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(def routes
  [&quot;/&quot;
   [
    {:name      ::dashboard
     :view      dashboard/render
     :link-text &quot;Dashboard&quot;
     :icon HomeIcon
     :controllers
     [{;; Do whatever initialization needed for dashboard page
       ;; I.e (re-frame/dispatch [::events/load-something-with-ajax])
       :start (fn [&amp; params](log/trace &quot;Entering home page&quot;))
       ;; Teardown can be done here.
       :stop  (fn [&amp; params] (log/trace &quot;Leaving home page&quot;))}]}]
   [&quot;apps&quot;
    {:name      ::apps
     :view      apps/render
     :controllers
     [{;; Initialization
       :start (fn [&amp; _params](log/trace &quot;Entering Apps page&quot;))
       ;; Teardown
       :stop  (fn [&amp; _params] (log/trace &quot;Leaving Apps page&quot;))}]}]
   [&quot;reports&quot;
    {:name      ::reports
     :view      reports/render
     :controllers
     [{;; Initialization
       :start (fn [&amp; _params](log/trace &quot;Entering Reports page&quot;))
       ;; Teardown
       :stop  (fn [&amp; _params] (log/trace &quot;Leaving Reports page&quot;))}]}]])</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(defn on-navigate [new-match]
  (when new-match
    (re-frame/dispatch [::navigated new-match])))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(def router
  (rf/router
    routes
    {:data {:coercion rss/coercion}}))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(defn init-routes! []
  (rfe/start!
    router
    on-navigate
    {:use-fragment true}))</pre>
				</td>
			</tr>
			<tr>
				<td class="spacer docs">&nbsp;</td>
				<td class="codes" />
			</tr>
		</table>
		<div class="footer">Generated by <a href="https://github.com/captain-porcelain/sidenotes">Sidenotes</a>.&nbsp;&nbsp;Syntax highlighting provided by Alex Gorbatchev's <a href="http://alexgorbatchev.com/SyntaxHighlighter/">SyntaxHighlighter</a>
		</div>
		<script type="text/javascript" src="js/app.js"></script>
	</body>
</html>
