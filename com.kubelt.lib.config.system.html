<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" content="text/html" http-equiv="Content-Type" />
		<meta content="" name="description" />
		<title>Kubelt SDK Reference</title>
 		<link rel="stylesheet" type="text/css" href="css/shCore.css" />
		<style type="text/css">.syntaxhighlighter{overflow:hidden !important;}</style>
		<link rel="stylesheet" type="text/css" href="css/shThemeMarginalia.css" />
		<link rel="stylesheet" type="text/css" href="css/marginalia.css" />
		<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
		<script type="text/javascript" src="js/xregexp-min.js"></script>
		<script type="text/javascript" src="js/shCore.js"></script>
		<script type="text/javascript" src="js/shBrushClojure.js"></script>
	</head>
	<body>
		<table>
			<tr>
				<td class="docs">
					<div class="docs-header">
						<a class="anchor" href="#repl" name="repl">
							<h1 class="project-name">com.kubelt.lib.config.system</h1>
							<a class="toc-link" href="index.html">toc</a>
						</a>
					</div>
				</td>
				<td class="codes" />
			</tr>
			<tr>
				<td class="docs">
					<p>SDK system config.</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure">(ns com.kubelt.lib.config.system
  {:copyright &quot;Â©2022 Proof Zero Inc.&quot; :license &quot;Apache 2.0&quot;}
  (:require
   [com.kubelt.lib.config.default :as lib.config.default]
   [com.kubelt.spec.config :as spec.config])
  (:require-macros
   [com.kubelt.spec :as kubelt.spec]))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<h2>Public</h2>
				</td>
				<td class="codes">
					<pre class="brush: clojure"></pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					
				</td>
				<td class="codes">
					<pre class="brush: clojure">(defn config
  [system-config options]
  &quot;Return an integrant system configuration map that combines a default
  configuration and a user-provided configuration options map.&quot;
  (-&gt;&gt; [[:log/level :log/level]
        [:app/name :app/name]
        [:ipfs.read/scheme :ipfs.read/scheme]
        [:ipfs.read/host :ipfs.read/host]
        [:ipfs.read/port :ipfs.read/port]
        [:ipfs.write/scheme :ipfs.write/scheme]
        [:ipfs.write/host :ipfs.write/host]
        [:ipfs.write/port :ipfs.write/port]
        [:oort/scheme :oort/scheme]
        [:oort/port :oort/port]
        [:oort/host :oort/host]
        [:config/storage :config/storage]
        [:crypto/session :credential/jwt {}]
        [:crypto/wallet :crypto/wallet]]
       (reduce (fn [s [sys-kw opts-kw default]]
                 (if-let [data (get options opts-kw default)]
                   (assoc s sys-kw data)
                   s)) system-config)))</pre>
				</td>
			</tr>
			<tr>
				<td class="docs">
					<p>Return a system configuration map including defaults where options were not supplied by the user. In any of the supplied values did not conform to the options schema, an error map is returned.</p>
				</td>
				<td class="codes">
					<pre class="brush: clojure">(defn config-&gt;system
  [config-map]
  (kubelt.spec/conform
   spec.config/optional-sdk-config config-map
   (let [sdk-config (merge lib.config.default/sdk config-map)]
     ;; Check that the final options map (defaults combined with
     ;; user-provided options) is valid.
     (kubelt.spec/conform
      spec.config/sdk-config sdk-config
      (let [;; Construct a system configuration map from the default
            ;; configuration combined with the options provided by the
            ;; user.
            system-config (config lib.config.default/system sdk-config)]
        (kubelt.spec/conform
         spec.config/system-config system-config
         ;; Returns the system configuration map, or an error map.
         system-config))))))</pre>
				</td>
			</tr>
			<tr>
				<td class="spacer docs">&nbsp;</td>
				<td class="codes" />
			</tr>
		</table>
		<div class="footer">Generated by <a href="https://github.com/captain-porcelain/sidenotes">Sidenotes</a>.&nbsp;&nbsp;Syntax highlighting provided by Alex Gorbatchev's <a href="http://alexgorbatchev.com/SyntaxHighlighter/">SyntaxHighlighter</a>
		</div>
		<script type="text/javascript" src="js/app.js"></script>
	</body>
</html>
